import{Z as ae,a1 as de,a3 as Y,f as z,aC as be,h as ue,a0 as K,g as te,aD as Te,c as y,a as R,o as f,a9 as ee,d as s,n as ye,_ as ze,e as Q,t as v,b as ge,z as F,r as O,B as se,$ as le,p as Oe,C as Le,an as Fe,w as Be,i as Qe,av as ce,aE as V,G as Ue,j as He,a4 as pe}from"./appInit-CGHXFw0-.js";import{b as Ge,c as qe,d as Ce,e as ke,h as Ye}from"./shop-Cvi7wzfy.js";import{I as Ve}from"./IconAlertCircle-Djjt2Tda.js";import{I as We}from"./IconAlertTriangle-BKoak6h-.js";import{I as xe}from"./IconArrowLeft-6FkQlYes.js";import{I as Xe}from"./IconArrowRight-CAdyv1A0.js";import{I as Ke}from"./IconCheck-B408Qq3X.js";import{I as Ze,a as Je}from"./IconCircle-C-OUj5TY.js";import{I as je}from"./IconExternalLink-CGeX3e2x.js";import{I as $e}from"./IconRefresh-DEF_LKdU.js";import{I as et}from"./IconX-CVTrmr_B.js";import"./index-sC8Xq0xY.js";/**
 * @license @tabler/icons-vue v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tt=ae("outline","clock","Clock",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 7v5l3 3",key:"svg-1"}]]);/**
 * @license @tabler/icons-vue v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var at=ae("outline","credit-card","CreditCard",[["path",{d:"M3 5m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M3 10l18 0",key:"svg-1"}],["path",{d:"M7 15l.01 0",key:"svg-2"}],["path",{d:"M11 15l2 0",key:"svg-3"}]]);/**
 * @license @tabler/icons-vue v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nt=ae("outline","help","Help",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M12 17l0 .01",key:"svg-1"}],["path",{d:"M12 13.5a1.5 1.5 0 0 1 1 -1.5a2.6 2.6 0 1 0 -3 -4",key:"svg-2"}]]);/**
 * @license @tabler/icons-vue v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ot=ae("outline","loader-2","Loader2",[["path",{d:"M12 3a9 9 0 1 0 9 9",key:"svg-0"}]]);/*!
 * qrcode.vue v3.6.0
 * A Vue.js component to generate QRCode. Both support Vue 2 and Vue 3
 * Â© 2017-PRESENT @scopewu(https://github.com/scopewu)
 * MIT License.
 */var x=function(){return x=Object.assign||function(l){for(var C,e=1,g=arguments.length;e<g;e++){C=arguments[e];for(var m in C)Object.prototype.hasOwnProperty.call(C,m)&&(l[m]=C[m])}return l},x.apply(this,arguments)};var Z;(function(a){var l=(function(){function r(t,n,o,i){if(this.version=t,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],t<r.MIN_VERSION||t>r.MAX_VERSION)throw new RangeError("Version value out of range");if(i<-1||i>7)throw new RangeError("Mask value out of range");this.size=t*4+17;for(var u=[],d=0;d<this.size;d++)u.push(!1);for(var d=0;d<this.size;d++)this.modules.push(u.slice()),this.isFunction.push(u.slice());this.drawFunctionPatterns();var k=this.addEccAndInterleave(o);if(this.drawCodewords(k),i==-1)for(var E=1e9,d=0;d<8;d++){this.applyMask(d),this.drawFormatBits(d);var I=this.getPenaltyScore();I<E&&(i=d,E=I),this.applyMask(d)}g(0<=i&&i<=7),this.mask=i,this.applyMask(i),this.drawFormatBits(i),this.isFunction=[]}return r.encodeText=function(t,n){var o=a.QrSegment.makeSegments(t);return r.encodeSegments(o,n)},r.encodeBinary=function(t,n){var o=a.QrSegment.makeBytes(t);return r.encodeSegments([o],n)},r.encodeSegments=function(t,n,o,i,u,d){if(o===void 0&&(o=1),i===void 0&&(i=40),u===void 0&&(u=-1),d===void 0&&(d=!0),!(r.MIN_VERSION<=o&&o<=i&&i<=r.MAX_VERSION)||u<-1||u>7)throw new RangeError("Invalid value");var k,E;for(k=o;;k++){var I=r.getNumDataCodewords(k,n)*8,b=m.getTotalBits(t,k);if(b<=I){E=b;break}if(k>=i)throw new RangeError("Data too long")}for(var P=0,S=[r.Ecc.MEDIUM,r.Ecc.QUARTILE,r.Ecc.HIGH];P<S.length;P++){var _=S[P];d&&E<=r.getNumDataCodewords(k,_)*8&&(n=_)}for(var p=[],M=0,h=t;M<h.length;M++){var A=h[M];C(A.mode.modeBits,4,p),C(A.numChars,A.mode.numCharCountBits(k),p);for(var D=0,N=A.getData();D<N.length;D++){var L=N[D];p.push(L)}}g(p.length==E);var U=r.getNumDataCodewords(k,n)*8;g(p.length<=U),C(0,Math.min(4,U-p.length),p),C(0,(8-p.length%8)%8,p),g(p.length%8==0);for(var B=236;p.length<U;B^=253)C(B,8,p);for(var H=[];H.length*8<p.length;)H.push(0);return p.forEach(function(W,X){return H[X>>>3]|=W<<7-(X&7)}),new r(k,n,H,u)},r.prototype.getModule=function(t,n){return 0<=t&&t<this.size&&0<=n&&n<this.size&&this.modules[n][t]},r.prototype.getModules=function(){return this.modules},r.prototype.drawFunctionPatterns=function(){for(var t=0;t<this.size;t++)this.setFunctionModule(6,t,t%2==0),this.setFunctionModule(t,6,t%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);for(var n=this.getAlignmentPatternPositions(),o=n.length,t=0;t<o;t++)for(var i=0;i<o;i++)t==0&&i==0||t==0&&i==o-1||t==o-1&&i==0||this.drawAlignmentPattern(n[t],n[i]);this.drawFormatBits(0),this.drawVersion()},r.prototype.drawFormatBits=function(t){for(var n=this.errorCorrectionLevel.formatBits<<3|t,o=n,i=0;i<10;i++)o=o<<1^(o>>>9)*1335;var u=(n<<10|o)^21522;g(u>>>15==0);for(var i=0;i<=5;i++)this.setFunctionModule(8,i,e(u,i));this.setFunctionModule(8,7,e(u,6)),this.setFunctionModule(8,8,e(u,7)),this.setFunctionModule(7,8,e(u,8));for(var i=9;i<15;i++)this.setFunctionModule(14-i,8,e(u,i));for(var i=0;i<8;i++)this.setFunctionModule(this.size-1-i,8,e(u,i));for(var i=8;i<15;i++)this.setFunctionModule(8,this.size-15+i,e(u,i));this.setFunctionModule(8,this.size-8,!0)},r.prototype.drawVersion=function(){if(!(this.version<7)){for(var t=this.version,n=0;n<12;n++)t=t<<1^(t>>>11)*7973;var o=this.version<<12|t;g(o>>>18==0);for(var n=0;n<18;n++){var i=e(o,n),u=this.size-11+n%3,d=Math.floor(n/3);this.setFunctionModule(u,d,i),this.setFunctionModule(d,u,i)}}},r.prototype.drawFinderPattern=function(t,n){for(var o=-4;o<=4;o++)for(var i=-4;i<=4;i++){var u=Math.max(Math.abs(i),Math.abs(o)),d=t+i,k=n+o;0<=d&&d<this.size&&0<=k&&k<this.size&&this.setFunctionModule(d,k,u!=2&&u!=4)}},r.prototype.drawAlignmentPattern=function(t,n){for(var o=-2;o<=2;o++)for(var i=-2;i<=2;i++)this.setFunctionModule(t+i,n+o,Math.max(Math.abs(i),Math.abs(o))!=1)},r.prototype.setFunctionModule=function(t,n,o){this.modules[n][t]=o,this.isFunction[n][t]=!0},r.prototype.addEccAndInterleave=function(t){var n=this.version,o=this.errorCorrectionLevel;if(t.length!=r.getNumDataCodewords(n,o))throw new RangeError("Invalid argument");for(var i=r.NUM_ERROR_CORRECTION_BLOCKS[o.ordinal][n],u=r.ECC_CODEWORDS_PER_BLOCK[o.ordinal][n],d=Math.floor(r.getNumRawDataModules(n)/8),k=i-d%i,E=Math.floor(d/i),I=[],b=r.reedSolomonComputeDivisor(u),P=0,S=0;P<i;P++){var _=t.slice(S,S+E-u+(P<k?0:1));S+=_.length;var p=r.reedSolomonComputeRemainder(_,b);P<k&&_.push(0),I.push(_.concat(p))}for(var M=[],h=function(A){I.forEach(function(D,N){(A!=E-u||N>=k)&&M.push(D[A])})},P=0;P<I[0].length;P++)h(P);return g(M.length==d),M},r.prototype.drawCodewords=function(t){if(t.length!=Math.floor(r.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");for(var n=0,o=this.size-1;o>=1;o-=2){o==6&&(o=5);for(var i=0;i<this.size;i++)for(var u=0;u<2;u++){var d=o-u,k=(o+1&2)==0,E=k?this.size-1-i:i;!this.isFunction[E][d]&&n<t.length*8&&(this.modules[E][d]=e(t[n>>>3],7-(n&7)),n++)}}g(n==t.length*8)},r.prototype.applyMask=function(t){if(t<0||t>7)throw new RangeError("Mask value out of range");for(var n=0;n<this.size;n++)for(var o=0;o<this.size;o++){var i=void 0;switch(t){case 0:i=(o+n)%2==0;break;case 1:i=n%2==0;break;case 2:i=o%3==0;break;case 3:i=(o+n)%3==0;break;case 4:i=(Math.floor(o/3)+Math.floor(n/2))%2==0;break;case 5:i=o*n%2+o*n%3==0;break;case 6:i=(o*n%2+o*n%3)%2==0;break;case 7:i=((o+n)%2+o*n%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[n][o]&&i&&(this.modules[n][o]=!this.modules[n][o])}},r.prototype.getPenaltyScore=function(){for(var t=0,n=0;n<this.size;n++){for(var o=!1,i=0,u=[0,0,0,0,0,0,0],d=0;d<this.size;d++)this.modules[n][d]==o?(i++,i==5?t+=r.PENALTY_N1:i>5&&t++):(this.finderPenaltyAddHistory(i,u),o||(t+=this.finderPenaltyCountPatterns(u)*r.PENALTY_N3),o=this.modules[n][d],i=1);t+=this.finderPenaltyTerminateAndCount(o,i,u)*r.PENALTY_N3}for(var d=0;d<this.size;d++){for(var o=!1,k=0,u=[0,0,0,0,0,0,0],n=0;n<this.size;n++)this.modules[n][d]==o?(k++,k==5?t+=r.PENALTY_N1:k>5&&t++):(this.finderPenaltyAddHistory(k,u),o||(t+=this.finderPenaltyCountPatterns(u)*r.PENALTY_N3),o=this.modules[n][d],k=1);t+=this.finderPenaltyTerminateAndCount(o,k,u)*r.PENALTY_N3}for(var n=0;n<this.size-1;n++)for(var d=0;d<this.size-1;d++){var E=this.modules[n][d];E==this.modules[n][d+1]&&E==this.modules[n+1][d]&&E==this.modules[n+1][d+1]&&(t+=r.PENALTY_N2)}for(var I=0,b=0,P=this.modules;b<P.length;b++){var S=P[b];I=S.reduce(function(M,h){return M+(h?1:0)},I)}var _=this.size*this.size,p=Math.ceil(Math.abs(I*20-_*10)/_)-1;return g(0<=p&&p<=9),t+=p*r.PENALTY_N4,g(0<=t&&t<=2568888),t},r.prototype.getAlignmentPatternPositions=function(){if(this.version==1)return[];for(var t=Math.floor(this.version/7)+2,n=Math.floor((this.version*8+t*3+5)/(t*4-4))*2,o=[6],i=this.size-7;o.length<t;i-=n)o.splice(1,0,i);return o},r.getNumRawDataModules=function(t){if(t<r.MIN_VERSION||t>r.MAX_VERSION)throw new RangeError("Version number out of range");var n=(16*t+128)*t+64;if(t>=2){var o=Math.floor(t/7)+2;n-=(25*o-10)*o-55,t>=7&&(n-=36)}return g(208<=n&&n<=29648),n},r.getNumDataCodewords=function(t,n){return Math.floor(r.getNumRawDataModules(t)/8)-r.ECC_CODEWORDS_PER_BLOCK[n.ordinal][t]*r.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][t]},r.reedSolomonComputeDivisor=function(t){if(t<1||t>255)throw new RangeError("Degree out of range");for(var n=[],o=0;o<t-1;o++)n.push(0);n.push(1);for(var i=1,o=0;o<t;o++){for(var u=0;u<n.length;u++)n[u]=r.reedSolomonMultiply(n[u],i),u+1<n.length&&(n[u]^=n[u+1]);i=r.reedSolomonMultiply(i,2)}return n},r.reedSolomonComputeRemainder=function(t,n){for(var o=n.map(function(E){return 0}),i=function(E){var I=E^o.shift();o.push(0),n.forEach(function(b,P){return o[P]^=r.reedSolomonMultiply(b,I)})},u=0,d=t;u<d.length;u++){var k=d[u];i(k)}return o},r.reedSolomonMultiply=function(t,n){if(t>>>8||n>>>8)throw new RangeError("Byte out of range");for(var o=0,i=7;i>=0;i--)o=o<<1^(o>>>7)*285,o^=(n>>>i&1)*t;return g(o>>>8==0),o},r.prototype.finderPenaltyCountPatterns=function(t){var n=t[1];g(n<=this.size*3);var o=n>0&&t[2]==n&&t[3]==n*3&&t[4]==n&&t[5]==n;return(o&&t[0]>=n*4&&t[6]>=n?1:0)+(o&&t[6]>=n*4&&t[0]>=n?1:0)},r.prototype.finderPenaltyTerminateAndCount=function(t,n,o){return t&&(this.finderPenaltyAddHistory(n,o),n=0),n+=this.size,this.finderPenaltyAddHistory(n,o),this.finderPenaltyCountPatterns(o)},r.prototype.finderPenaltyAddHistory=function(t,n){n[0]==0&&(t+=this.size),n.pop(),n.unshift(t)},r.MIN_VERSION=1,r.MAX_VERSION=40,r.PENALTY_N1=3,r.PENALTY_N2=3,r.PENALTY_N3=40,r.PENALTY_N4=10,r.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],r.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],r})();a.QrCode=l;function C(r,t,n){if(t<0||t>31||r>>>t)throw new RangeError("Value out of range");for(var o=t-1;o>=0;o--)n.push(r>>>o&1)}function e(r,t){return(r>>>t&1)!=0}function g(r){if(!r)throw new Error("Assertion error")}var m=(function(){function r(t,n,o){if(this.mode=t,this.numChars=n,this.bitData=o,n<0)throw new RangeError("Invalid argument");this.bitData=o.slice()}return r.makeBytes=function(t){for(var n=[],o=0,i=t;o<i.length;o++){var u=i[o];C(u,8,n)}return new r(r.Mode.BYTE,t.length,n)},r.makeNumeric=function(t){if(!r.isNumeric(t))throw new RangeError("String contains non-numeric characters");for(var n=[],o=0;o<t.length;){var i=Math.min(t.length-o,3);C(parseInt(t.substring(o,o+i),10),i*3+1,n),o+=i}return new r(r.Mode.NUMERIC,t.length,n)},r.makeAlphanumeric=function(t){if(!r.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");var n=[],o;for(o=0;o+2<=t.length;o+=2){var i=r.ALPHANUMERIC_CHARSET.indexOf(t.charAt(o))*45;i+=r.ALPHANUMERIC_CHARSET.indexOf(t.charAt(o+1)),C(i,11,n)}return o<t.length&&C(r.ALPHANUMERIC_CHARSET.indexOf(t.charAt(o)),6,n),new r(r.Mode.ALPHANUMERIC,t.length,n)},r.makeSegments=function(t){return t==""?[]:r.isNumeric(t)?[r.makeNumeric(t)]:r.isAlphanumeric(t)?[r.makeAlphanumeric(t)]:[r.makeBytes(r.toUtf8ByteArray(t))]},r.makeEci=function(t){var n=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)C(t,8,n);else if(t<16384)C(2,2,n),C(t,14,n);else if(t<1e6)C(6,3,n),C(t,21,n);else throw new RangeError("ECI assignment value out of range");return new r(r.Mode.ECI,0,n)},r.isNumeric=function(t){return r.NUMERIC_REGEX.test(t)},r.isAlphanumeric=function(t){return r.ALPHANUMERIC_REGEX.test(t)},r.prototype.getData=function(){return this.bitData.slice()},r.getTotalBits=function(t,n){for(var o=0,i=0,u=t;i<u.length;i++){var d=u[i],k=d.mode.numCharCountBits(n);if(d.numChars>=1<<k)return 1/0;o+=4+k+d.bitData.length}return o},r.toUtf8ByteArray=function(t){t=encodeURI(t);for(var n=[],o=0;o<t.length;o++)t.charAt(o)!="%"?n.push(t.charCodeAt(o)):(n.push(parseInt(t.substring(o+1,o+3),16)),o+=2);return n},r.NUMERIC_REGEX=/^[0-9]*$/,r.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,r.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",r})();a.QrSegment=m})(Z||(Z={}));(function(a){(function(l){var C=(function(){function e(g,m){this.ordinal=g,this.formatBits=m}return e.LOW=new e(0,1),e.MEDIUM=new e(1,0),e.QUARTILE=new e(2,3),e.HIGH=new e(3,2),e})();l.Ecc=C})(a.QrCode||(a.QrCode={}))})(Z||(Z={}));(function(a){(function(l){var C=(function(){function e(g,m){this.modeBits=g,this.numBitsCharCount=m}return e.prototype.numCharCountBits=function(g){return this.numBitsCharCount[Math.floor((g+7)/17)]},e.NUMERIC=new e(1,[10,12,14]),e.ALPHANUMERIC=new e(2,[9,11,13]),e.BYTE=new e(4,[8,16,16]),e.KANJI=new e(8,[8,10,12]),e.ECI=new e(7,[0,0,0]),e})();l.Mode=C})(a.QrSegment||(a.QrSegment={}))})(Z||(Z={}));var j=Z,fe="L",he={L:j.QrCode.Ecc.LOW,M:j.QrCode.Ecc.MEDIUM,Q:j.QrCode.Ecc.QUARTILE,H:j.QrCode.Ecc.HIGH},rt=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})();function ve(a){return a in he}function Ee(a,l){l===void 0&&(l=0);var C=[];return a.forEach(function(e,g){var m=null;e.forEach(function(r,t){if(!r&&m!==null){C.push("M".concat(m+l," ").concat(g+l,"h").concat(t-m,"v1H").concat(m+l,"z")),m=null;return}if(t===e.length-1){if(!r)return;m===null?C.push("M".concat(t+l,",").concat(g+l," h1v1H").concat(t+l,"z")):C.push("M".concat(m+l,",").concat(g+l," h").concat(t+1-m,"v1H").concat(m+l,"z"));return}r&&m===null&&(m=t)})}),C.join("")}function Ie(a,l,C,e){var g=e.width,m=e.height,r=e.x,t=e.y,n=a.length+C*2,o=Math.floor(l*.1),i=n/l,u=(g||o)*i,d=(m||o)*i,k=r==null?a.length/2-u/2:r*i,E=t==null?a.length/2-d/2:t*i,I=null;if(e.excavate){var b=Math.floor(k),P=Math.floor(E),S=Math.ceil(u+k-b),_=Math.ceil(d+E-P);I={x:b,y:P,w:S,h:_}}return{x:k,y:E,h:d,w:u,excavation:I}}function Pe(a,l){return a.slice().map(function(C,e){return e<l.y||e>=l.y+l.h?C:C.map(function(g,m){return m<l.x||m>=l.x+l.w?g:!1})})}var me={value:{type:String,required:!0,default:""},size:{type:Number,default:100},level:{type:String,default:fe,validator:function(a){return ve(a)}},background:{type:String,default:"#fff"},foreground:{type:String,default:"#000"},margin:{type:Number,required:!1,default:0},imageSettings:{type:Object,required:!1,default:function(){return{}}},gradient:{type:Boolean,required:!1,default:!1},gradientType:{type:String,required:!1,default:"linear",validator:function(a){return["linear","radial"].indexOf(a)>-1}},gradientStartColor:{type:String,required:!1,default:"#000"},gradientEndColor:{type:String,required:!1,default:"#fff"}},it=x(x({},me),{renderAs:{type:String,required:!1,default:"canvas",validator:function(a){return["canvas","svg"].indexOf(a)>-1}}}),st=de({name:"QRCodeSvg",props:me,setup:function(a){var l=z(0),C=z(""),e,g=function(){var r=a.value,t=a.level,n=a.margin,o=n>>>0,i=ve(t)?t:fe,u=j.QrCode.encodeText(r,he[i]).getModules();if(l.value=u.length+o*2,a.imageSettings.src){var d=Ie(u,a.size,o,a.imageSettings);e={x:d.x+o,y:d.y+o,width:d.w,height:d.h},d.excavation&&(u=Pe(u,d.excavation))}C.value=Ee(u,o)},m=function(){if(!a.gradient)return null;var r=a.gradientType==="linear"?{x1:"0%",y1:"0%",x2:"100%",y2:"100%"}:{cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"};return Y(a.gradientType==="linear"?"linearGradient":"radialGradient",x({id:"qr-gradient"},r),[Y("stop",{offset:"0%",style:{stopColor:a.gradientStartColor}}),Y("stop",{offset:"100%",style:{stopColor:a.gradientEndColor}})])};return g(),be(g),function(){return Y("svg",{width:a.size,height:a.size,"shape-rendering":"crispEdges",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(l.value," ").concat(l.value)},[Y("defs",{},[m()]),Y("rect",{width:"100%",height:"100%",fill:a.background}),Y("path",{fill:a.gradient?"url(#qr-gradient)":a.foreground,d:C.value}),a.imageSettings.src&&Y("image",x({href:a.imageSettings.src},e))])}}}),lt=de({name:"QRCodeCanvas",props:me,setup:function(a,l){var C=z(null),e=z(null),g=function(){var r=a.value,t=a.level,n=a.size,o=a.margin,i=a.background,u=a.foreground,d=a.gradient,k=a.gradientType,E=a.gradientStartColor,I=a.gradientEndColor,b=o>>>0,P=ve(t)?t:fe,S=C.value;if(S){var _=S.getContext("2d");if(_){var p=j.QrCode.encodeText(r,he[P]).getModules(),M=p.length+b*2,h=e.value,A={x:0,y:0,width:0,height:0},D=a.imageSettings.src&&h!=null&&h.naturalWidth!==0&&h.naturalHeight!==0;if(D){var N=Ie(p,a.size,b,a.imageSettings);A={x:N.x+b,y:N.y+b,width:N.w,height:N.h},N.excavation&&(p=Pe(p,N.excavation))}var L=window.devicePixelRatio||1,U=n/M*L;if(S.height=S.width=n*L,_.scale(U,U),_.fillStyle=i,_.fillRect(0,0,M,M),d){var B=void 0;k==="linear"?B=_.createLinearGradient(0,0,M,M):B=_.createRadialGradient(M/2,M/2,0,M/2,M/2,M/2),B.addColorStop(0,E),B.addColorStop(1,I),_.fillStyle=B}else _.fillStyle=u;rt?_.fill(new Path2D(Ee(p,b))):p.forEach(function(H,W){H.forEach(function(X,$){X&&_.fillRect($+b,W+b,1,1)})}),D&&_.drawImage(h,A.x,A.y,A.width,A.height)}}};ue(g),be(g);var m=l.attrs.style;return function(){return Y(K,[Y("canvas",x(x({},l.attrs),{ref:C,style:x(x({},m),{width:"".concat(a.size,"px"),height:"".concat(a.size,"px")})})),a.imageSettings.src&&Y("img",{ref:e,src:a.imageSettings.src,style:{display:"none"},onLoad:g})])}}}),ct=de({name:"Qrcode",render:function(){var a=this.$props,l=a.renderAs,C=a.value,e=a.size,g=a.margin,m=a.level,r=a.background,t=a.foreground,n=a.imageSettings,o=a.gradient,i=a.gradientType,u=a.gradientStartColor,d=a.gradientEndColor;return Y(l==="svg"?st:lt,{value:C,size:e,margin:g,level:m,background:r,foreground:t,imageSettings:n,gradient:o,gradientType:i,gradientStartColor:u,gradientEndColor:d})},props:it});const we=200,dt=800,ut=.1,ft=.3,Me=.5,ht=.5,vt=12,mt=800,_t=1600,yt=150,gt=3500,pt=["#FFC700","#FF0000","#2E3191","#41BBC7"];var _e={props:{particleCount:{type:Number,default:yt},particleSize:{type:Number,default:vt},duration:{type:Number,default:gt},colors:{type:Array,default:pt},force:{type:Number,default:ht},stageHeight:{type:Number,default:mt},stageWidth:{type:Number,default:_t},shouldDestroyAfterDone:{type:Boolean,default:!0}},setup(a){const l=z(!0),C=(_,p)=>{S(_,{degree:p})},e=te(()=>m(a.particleCount,a.colors));Te(()=>{a.particleCount>300&&console.log("[VUE-CONFETTI-EXPLOSION] That's a lot of confetti, you sure about that? A lesser number like 200 will still give off the party vibes while still not bricking the device ðŸ˜‰")});const g=te(()=>P(a.particleCount,a.duration,a.colors,a.particleSize,a.force,a.stageHeight,a.stageWidth));ue(async()=>{await r(a.duration),a.shouldDestroyAfterDone&&(l.value=!1)});const m=(_,p)=>{const M=360/_;return Array.from({length:_},(h,A)=>({color:p[A%p.length],degree:A*M}))},r=_=>new Promise(p=>setTimeout(p,_));function t(_){let p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Math.round((_+Number.EPSILON)*10**p)/10**p}function n(_,p){if(_===p)return!0;if(_==null||p==null||_.length!==p.length)return!1;for(let M=0;M<_.length;M++)if(_[M]!==p[M])return!1;return!0}const o=(_,p,M,h,A)=>(_-p)*(A-h)/(M-p)+h,i=(_,p)=>{const M=_+p;return M>360?M-360:M},u=()=>Math.random()>.5,d=[0,0,1],k=[[1,1,0],[1,0,1],[0,1,1],[1,0,0],[0,1,0],d],E=_=>!n(k[_],d)&&u(),I=_=>typeof _>"u",b=_=>{console.error(_)};function P(_,p,M,h,A,D,N){const L=Number.isSafeInteger;return!I(_)&&L(_)&&_<0?(b("particleCount must be a positive integer"),!1):!I(p)&&L(p)&&p<0?(b("duration must be a positive integer"),!1):!I(M)&&!Array.isArray(M)?(b("colors must be an array of strings"),!1):!I(h)&&L(h)&&h<0?(b("particleSize must be a positive integer"),!1):!I(A)&&L(A)&&(A<0||A>1)?(b("force must be a positive integer and should be within 0 and 1"),!1):!I(D)&&typeof D=="number"&&L(D)&&D<0?(b("floorHeight must be a positive integer"),!1):!I(N)&&typeof N=="number"&&L(N)&&N<0?(b("floorWidth must be a positive integer"),!1):!0}function S(_,p){let{degree:M}=p;const h=o(Math.abs(i(M,90)-180),0,180,-a.stageWidth/2,a.stageWidth/2),A=Math.random()*(dt-we)+we,D=Math.round(Math.random()*(k.length-1)),N=a.duration-Math.round(Math.random()*1e3),L=Math.random()<ut,U=E(D),B=L?t(Math.random()*ft,2):0,H=B*-1,W=B,X=t(Math.abs(o(Math.abs(i(M,90)-180),0,180,-1,1)),4),$=t(Math.random()*Me,4),ne=t(Math.random()*a.force*(u()?1:-1),4),J=Me,oe=t(Math.max(o(Math.abs(M-180),0,180,a.force,-a.force),0),4),T=(re,ie)=>_?.style.setProperty(re,ie+"");T("--x-landing-point",`${h}px`),T("--duration-chaos",`${N}ms`),T("--x1",`${B}`),T("--x2",`${H}`),T("--x3",`${W}`),T("--x4",`${X}`),T("--y1",`${$}`),T("--y2",`${ne}`),T("--y3",`${J}`),T("--y4",`${oe}`),T("--width",`${U?a.particleSize:Math.round(Math.random()*4)+a.particleSize/2}px`),T("--height",(U?a.particleSize:Math.round(Math.random()*2)+a.particleSize)+"px"),T("--rotation",`${k[D].join()}`),T("--rotation-duration",`${A}ms`),T("--border-radius",`${U?"50%":"0"}`)}return{isVisible:l,isValid:g,stageHeight:a.stageHeight,particles:e,setItemRef:C}}};function Ct(a,l,C,e,g,m){return e.isVisible&&e.isValid?(f(),y("div",{key:0,class:"confetti-container",style:ye(`--floor-height: ${e.stageHeight}px;`)},[(f(!0),y(K,null,ee(e.particles,r=>{let{color:t,degree:n}=r;return f(),y("div",{key:n,class:"particle",ref:o=>e.setItemRef(o,n)},[s("div",{style:ye(`--bgcolor: ${t};`)},null,4)],512)}),128))],4)):R("",!0)}function kt(a,l){l===void 0&&(l={});var C=l.insertAt;if(!(typeof document>"u")){var e=document.head||document.getElementsByTagName("head")[0],g=document.createElement("style");g.type="text/css",C==="top"&&e.firstChild?e.insertBefore(g,e.firstChild):e.appendChild(g),g.styleSheet?g.styleSheet.cssText=a:g.appendChild(document.createTextNode(a))}}var wt=`
@keyframes y-axis-4ff796ae {
to {
    transform: translate3d(0, var(--floor-height), 0);
}
}
@keyframes x-axis-4ff796ae {
to {
    transform: translate3d(var(--x-landing-point), 0, 0);
}
}
@keyframes rotation-4ff796ae {
to {
    transform: rotate3d(var(--rotation), 360deg);
}
}
.confetti-container[data-v-4ff796ae] {
  width: 0;
  height: 0;
  overflow: visible;
  position: relative;
  transform: translate3d(var(--x, 0), var(--y, 0), 0);
  z-index: 1200;
}
.confetti-container > .particle[data-v-4ff796ae] {
  animation: x-axis-4ff796ae var(--duration-chaos) forwards cubic-bezier(var(--x1), var(--x2), var(--x3), var(--x4));
}
.confetti-container > .particle div[data-v-4ff796ae] {
  position: absolute;
  top: 0;
  left: 0;
  animation: y-axis-4ff796ae var(--duration-chaos) forwards cubic-bezier(var(--y1), var(--y2), var(--y3), var(--y4));
  width: var(--width);
  height: var(--height);
}
.confetti-container > .particle div[data-v-4ff796ae]:before {
  display: block;
  height: 100%;
  width: 100%;
  content: "";
  background-color: var(--bgcolor);
  animation: rotation-4ff796ae var(--rotation-duration) infinite linear;
  border-radius: var(--border-radius);
}
`;kt(wt);_e.render=Ct;_e.__scopeId="data-v-4ff796ae";var Mt=(()=>{const a=_e;return a.install=l=>{l.component("ConfettiExplosion",a)},a})();const bt={name:"PaymentView",components:{IconCheck:Ke,IconX:et,IconCreditCard:at,IconCircle:Je,IconCircleCheck:Ze,IconAlertCircle:Ve,IconArrowRight:Xe,IconAlertTriangle:We,IconRefresh:$e,IconExternalLink:je,IconArrowLeft:xe,QrcodeVue:ct,ConfettiExplosion:Mt,IconClock:tt,IconLoader2:ot,IconHelp:nt},setup(){const{t:a}=Oe(),{showToast:l}=Ue(),C=Fe(),e=He(),g=z(!1),m=Le({order:!0,methods:!0,checking:!1,cancelling:!1,paying:!1}),r=z({}),t=z([]),n=z(null),o=z(null),i=z(!1),u=z(!1),d=z(!1),k=z(!1),E=z(!1),I=z(null),b=z(null),P=te(()=>{if(!n.value||!r.value.total_amount)return 0;const c=t.value.find(G=>G.id===n.value);if(!c)return 0;let w=0;return c.handling_fee_percent&&(w+=r.value.total_amount*c.handling_fee_percent/100),c.handling_fee_fixed&&(w+=c.handling_fee_fixed),Math.round(w)}),S=te(()=>r.value.total_amount?r.value.total_amount+P.value:0),_=async()=>{m.order=!0;try{let c=null;const w=new URLSearchParams(window.location.search||window.location.hash.split("?")[1]||"");if(w.has("trade_no")&&(c=w.get("trade_no")),!c&&w.has("out_trade_no")&&(c=w.get("out_trade_no")),c||(c=C.query.trade_no||C.query.out_trade_no),!c){l(a("payment.no_order_selected"),"error"),e.push("/shop");return}const G=await Ge(c);G.data?(r.value=G.data,r.value.status===0&&r.value.total_amount===0&&H()):(l(a("payment.order_not_found"),"error"),e.push("/shop"))}catch(c){console.error("Failed to fetch order details:",c),l(a("payment.failed_to_fetch_order"),"error"),e.push("/shop")}finally{m.order=!1}},p=async()=>{m.methods=!0;try{const c=await qe();c.data&&(t.value=c.data,(t.value.length===1||V.autoSelectFirstMethod)&&t.value.length>0&&(n.value=t.value[0].id))}catch(c){console.error("Failed to fetch payment methods:",c),l(a("payment.failed_to_fetch_methods"),"error")}finally{m.methods=!1}},M=c=>{n.value=c},h=c=>c?new Date(c*1e3).toLocaleString():"-",A=c=>c==null?"-":`à§³${(c/100).toFixed(2)}`,D=c=>c==="reset_price"||c==="deposit"?a(`payment.period_types.${c}`):{month_price:a("shop.plan.price_options.month"),quarter_price:a("shop.plan.price_options.quarter"),half_year_price:a("shop.plan.price_options.half_year"),year_price:a("shop.plan.price_options.year"),two_year_price:a("shop.plan.price_options.two_year"),three_year_price:a("shop.plan.price_options.three_year"),onetime_price:a("shop.plan.price_options.onetime")}[c]||c,N=c=>c?c>=1024?`${(c/1024).toFixed(1)} TB`:`${c} GB`:"-",L=c=>{let w="";if(c.handling_fee_percent&&(w+=`${c.handling_fee_percent}%`),c.handling_fee_fixed){const G=(c.handling_fee_fixed/100).toFixed(2);w+=w?` + à§³${G}`:`à§³${G}`}return w?`${a("payment.fee")}: ${w}`:""},U=()=>!r.value||!r.value.plan||!r.value.period?0:r.value.plan[r.value.period]||0,B=async()=>{if(r.value.total_amount>0&&!n.value){l(a("payment.select_method_first"),"warning");return}m.checking=!0;try{r.value.total_amount===0&&t.value&&t.value.length>0&&(n.value=t.value[0].id),await ke(r.value.trade_no,n.value),l(a("payment.payment_processing"),"info"),H()}catch(c){console.error("Checkout failed:",c),l(a("payment.check_failed"),"error"),m.checking=!1}},H=async()=>{try{if(i.value)return;if(await W(),r.value.total_amount===0&&!i.value)setTimeout(async()=>{await W(!0)},1e3);else if(r.value.total_amount>0&&!i.value)if(o.value&&clearInterval(o.value),V.autoCheckPayment){let c=0;o.value=setInterval(()=>{c++,W(),V.autoCheckMaxTimes>0&&c>=V.autoCheckMaxTimes&&(clearInterval(o.value),m.checking=!1,i.value||l(a("payment.check_timeout"),"info"))},V.autoCheckInterval)}else{let c=0;o.value=setInterval(()=>{c++,W(),c>=2&&(clearInterval(o.value),m.checking=!1,i.value||l(a("payment.check_timeout"),"info"))},5e3)}}catch(c){console.error("Failed to check payment status:",c),l(a("payment.check_failed"),"error"),m.checking=!1}},W=async(c=!1)=>{try{const w=await Ce(r.value.trade_no);w.data===1?(r.value.status=w.data,setTimeout(()=>{const G=document.querySelector(".order-status-notice");G&&G.classList.add("status-transition"),r.value.status=3,X(!c)},1e3)):w.data!==0&&w.data!==2?(r.value.status=w.data,X(!c)):w.data===2&&(o.value&&(clearInterval(o.value),o.value=null),c||l(a("payment.order_cancelled"),"warning"),m.checking=!1,m.paying=!1,r.value.status=w.data,J()),r.value.total_amount===0&&(m.checking=!1,m.paying=!1)}catch(w){console.error("Failed to check payment status:",w),r.value.total_amount===0&&(m.checking=!1,m.paying=!1)}},X=(c=!0)=>{i.value||(o.value&&(clearInterval(o.value),o.value=null),i.value=!0,m.checking=!1,m.paying=!1,J(),g.value||(u.value=!0,pe(()=>{setTimeout(()=>{d.value=!0},300),c&&l(a("payment.pay_success"),"success"),setTimeout(()=>{d.value=!1,setTimeout(()=>{u.value=!1},500)},4500)})))},$=()=>{m.cancelling||(k.value=!0)},ne=()=>{k.value=!1},J=()=>{E.value=!1,I.value=null,b.value=null},oe=()=>{if(!n.value)return"";const c=t.value.find(w=>w.id===n.value);return c?c.name:""},T=async()=>{if(!n.value){l(a("payment.select_method_first"),"warning");return}m.paying=!0;try{const c=await ke(r.value.trade_no,n.value);if(c.data){if(c.type===0)I.value=c.data,b.value=null,E.value=!0;else if(c.type===1){b.value=c.data,I.value=null;const w=ce()==="Safari",G=V.useSafariPaymentModal;w&&G?E.value=!0:V.openPaymentInNewTab?setTimeout(()=>{const q=document.createElement("a");q.href=c.data,q.target="_blank",q.rel="noopener noreferrer",document.body.appendChild(q),q.click(),document.body.removeChild(q),E.value=!0},100):setTimeout(()=>{const q=document.createElement("a");q.href=c.data,q.rel="noopener noreferrer",document.body.appendChild(q),q.click(),document.body.removeChild(q)},100)}H()}}catch(c){console.error("Failed to initiate payment:",c),l(a("payment.check_failed"),"error")}finally{m.paying=!1}},re=()=>{if(b.value)try{const c=ce()==="Safari";if(V.openPaymentInNewTab||c&&V.useSafariPaymentModal){const w=document.createElement("a");w.href=b.value,w.target="_blank",w.rel="noopener noreferrer",document.body.appendChild(w),w.click(),document.body.removeChild(w)}else{const w=document.createElement("a");w.href=b.value,w.rel="noopener noreferrer",document.body.appendChild(w),w.click(),document.body.removeChild(w)}}catch(c){console.error("Failed to open payment link:",c),V.openPaymentInNewTab?window.open(b.value,"_blank"):window.location.href=b.value}},ie=async()=>{m.cancelling=!0,k.value=!1;try{await Ye(r.value.trade_no),l(a("payment.cancel_success"),"success"),o.value&&clearInterval(o.value),e.push("/shop")}catch(c){console.error("Failed to cancel order:",c),l(a("payment.cancel_failed"),"error")}finally{m.cancelling=!1}},Ae=()=>{r.value.period==="deposit"?e.push("/wallet/deposit"):e.push("/dashboard")},Se=async()=>{m.checking=!0;try{const c=await Ce(r.value.trade_no);c.data===0?l(a("payment.payment_pending"),"info"):c.data===2?(l(a("payment.order_cancelled"),"warning"),o.value&&(clearInterval(o.value),o.value=null),r.value.status=c.data):(l(a("payment.payment_successful"),"success"),r.value.status=c.data,i.value=!0,o.value&&(clearInterval(o.value),o.value=null),J(),u.value=!0,setTimeout(()=>{d.value=!0},300),setTimeout(()=>{d.value=!1,setTimeout(()=>{u.value=!1},500)},4500))}catch(c){console.error("Failed to check payment status:",c),l(a("payment.check_failed"),"error")}finally{m.checking=!1,m.paying=!1}},Re=c=>({0:a("payment.status.pending"),1:a("payment.status.processing"),2:a("payment.status.cancelled"),3:a("payment.status.completed"),4:a("payment.status.discounted")})[c]||a("payment.status.unknown"),Ne=c=>({0:"status-pending",1:"status-processing",2:"status-cancelled",3:"status-completed",4:"status-discounted"})[c]||"status-unknown",De=()=>{e.go(-1)};return ue(()=>{_(),p(),C.query.from==="orders"||document.referrer&&document.referrer.includes("/orders")?g.value=!0:g.value=!1,Be(()=>r.value.status,c=>{(c===3||c===4)&&!i.value&&(i.value=!0,g.value||(u.value=!0,pe(()=>{setTimeout(()=>{d.value=!0},300),setTimeout(()=>{d.value=!1,setTimeout(()=>{u.value=!1},500)},4500)})))},{immediate:!1})}),Qe(()=>{o.value&&clearInterval(o.value)}),{loading:m,orderDetail:r,paymentMethods:t,selectedMethod:n,paymentSuccessful:i,showSuccessAnimation:u,showConfettiAnimation:d,fromOrderList:g,formatDate:h,formatAmount:A,formatPeriod:D,formatTraffic:N,formatFee:L,selectMethod:M,checkPayment:B,cancelCurrentOrder:$,goToDashboard:Ae,getPlanPrice:U,showCancelConfirm:k,confirmCancel:ie,closeModal:ne,showPaymentModal:E,paymentQRCode:I,paymentLink:b,PAYMENT_CONFIG:V,getSelectedMethodName:oe,processPayment:T,openPaymentLink:re,closePaymentModal:J,handleFeeAmount:P,totalWithFee:S,window,checkPaymentStatus:Se,detectBrowser:ce,getStatusText:Re,getStatusClass:Ne,goBack:De}}},Et={class:"payment-container"},It={class:"payment-inner"},Pt={class:"dashboard-card title-card"},At={class:"card-header"},St={class:"card-title"},Rt={class:"card-body"},Nt={class:"content-wrapper"},Dt={class:"left-column"},Tt={class:"section-wrapper"},zt={class:"section-title"},Ot={key:0,class:"product-info"},Lt={key:0},Ft={class:"info-row"},Bt={class:"info-label"},Qt={class:"info-value"},Ut={key:1},Ht={class:"info-row"},Gt={class:"info-label"},qt={class:"info-value"},Yt={class:"info-row"},Vt={class:"info-label"},Wt={class:"info-value"},xt={class:"info-row"},Xt={class:"info-label"},Kt={class:"info-value"},Zt={key:1,class:"skeleton-card"},Jt={class:"section-wrapper"},jt={class:"section-title"},$t={key:0,class:"order-info"},ea={class:"info-row"},ta={class:"info-label"},aa={class:"info-value"},na={class:"info-row"},oa={class:"info-label"},ra={class:"info-value"},ia={key:0,class:"info-row"},sa={class:"info-label"},la={class:"info-value amount"},ca={key:1,class:"info-row"},da={class:"info-label"},ua={class:"info-value amount"},fa={key:2,class:"info-row discount-row"},ha={class:"info-label"},va={class:"info-value discount"},ma={key:3,class:"info-row"},_a={class:"info-label"},ya={class:"info-value discount"},ga={key:4,class:"info-row"},pa={class:"info-label"},Ca={class:"info-value"},ka={key:5,class:"info-row"},wa={class:"info-label"},Ma={class:"info-value fee"},ba={class:"info-row final-row"},Ea={class:"info-label"},Ia={class:"info-value final"},Pa={key:1,class:"skeleton-card"},Aa={class:"right-column"},Sa={class:"section-wrapper order-status"},Ra={class:"section-title"},Na={key:0,class:"status-info"},Da={class:"status-icon"},Ta={class:"status-text"},za={key:0,class:"activate-status"},Oa={key:1},La={key:2},Fa={key:3},Ba={key:4},Qa={key:5},Ua={key:6},Ha={key:7},Ga={key:1,class:"skeleton-card"},qa={key:0,class:"section-wrapper free-order"},Ya={class:"section-title"},Va={class:"free-notice"},Wa={class:"notice-text"},xa={key:1,class:"section-wrapper"},Xa={class:"section-title"},Ka={key:0,class:"payment-methods"},Za=["onClick"],Ja={class:"method-icon"},ja=["src","alt"],$a={class:"method-details"},en={class:"method-name"},tn={key:0,class:"method-fee"},an={class:"method-check"},nn={key:1,class:"skeleton-card"},on={class:"action-buttons"},rn={key:0,class:"btn-group pay-row"},sn={key:1,class:"btn-group pay-row"},ln={key:0},cn={key:1},dn={key:0,class:"btn-group pay-row"},un=["disabled"],fn={key:1,class:"loader"},hn={key:1,class:"btn-group action-row"},vn=["disabled"],mn={key:1,class:"loader"},_n=["disabled"],yn={key:1,class:"loader"},gn={key:2,class:"btn-group action-row"},pn=["disabled"],Cn={key:1,class:"loader"},kn=["disabled"],wn={key:1,class:"loader"},Mn={key:0,class:"payment-success-overlay"},bn={class:"success-animation"},En={class:"check-container"},In={class:"check-background"},Pn={key:0,class:"confetti-container"},An={key:0,class:"cancel-modal"},Sn={class:"cancel-modal-container"},Rn={class:"cancel-modal-content"},Nn={class:"cancel-modal-icon"},Dn={class:"cancel-modal-header"},Tn={class:"cancel-modal-actions"},zn={key:0,class:"modal-wrapper"},On={class:"modal-container"},Ln={class:"modal-card"},Fn={class:"modal-header"},Bn={class:"icon-wrapper payment"},Qn={key:0},Un={key:1},Hn={key:2,class:"qrcode-container"},Gn={key:3,class:"payment-link"},qn={key:0},Yn={key:1},Vn={class:"modal-footer"};function Wn(a,l,C,e,g,m){const r=O("IconClock"),t=O("IconLoader2"),n=O("IconX"),o=O("IconCheck"),i=O("IconHelp"),u=O("IconAlertCircle"),d=O("IconCreditCard"),k=O("IconCircleCheck"),E=O("IconCircle"),I=O("IconArrowLeft"),b=O("IconArrowRight"),P=O("IconRefresh"),S=O("ConfettiExplosion"),_=O("IconAlertTriangle"),p=O("QrcodeVue"),M=O("IconExternalLink");return f(),y("div",Et,[s("div",It,[s("div",Pt,[s("div",At,[s("h2",St,v(a.$t("payment.title")),1)]),s("div",Rt,[s("p",null,v(a.$t("payment.description")),1)])]),s("div",Nt,[s("div",Dt,[s("div",Tt,[s("div",zt,[s("span",null,v(a.$t("payment.product_info")),1)]),e.loading.order?(f(),y("div",Zt,[(f(),y(K,null,ee(3,h=>s("div",{class:"skeleton-text",key:"product-"+h})),64))])):(f(),y("div",Ot,[e.orderDetail.period==="deposit"?(f(),y("div",Lt,[s("div",Ft,[s("div",Bt,v(a.$t("wallet.deposit.title")),1),s("div",Qt,v(e.formatAmount(e.orderDetail.total_amount)),1)])])):(f(),y("div",Ut,[s("div",Ht,[s("div",Gt,v(a.$t("payment.plan_name")),1),s("div",qt,v(e.orderDetail.plan?.name||"-"),1)]),s("div",Yt,[s("div",Vt,v(a.$t("payment.period")),1),s("div",Wt,v(e.formatPeriod(e.orderDetail.period)),1)]),s("div",xt,[s("div",Xt,v(a.$t("payment.traffic")),1),s("div",Kt,v(e.formatTraffic(e.orderDetail.plan?.transfer_enable)),1)])]))]))]),s("div",Jt,[s("div",jt,[s("span",null,v(a.$t("payment.order_info")),1)]),e.loading.order?(f(),y("div",Pa,[(f(),y(K,null,ee(5,h=>s("div",{class:"skeleton-text",key:"order-"+h})),64))])):(f(),y("div",$t,[s("div",ea,[s("div",ta,v(a.$t("payment.trade_no")),1),s("div",aa,v(e.orderDetail.trade_no||"-"),1)]),s("div",na,[s("div",oa,v(a.$t("payment.created_at")),1),s("div",ra,v(e.formatDate(e.orderDetail.created_at)),1)]),e.orderDetail.period==="deposit"?(f(),y("div",ia,[s("div",sa,v(a.$t("wallet.deposit.title")),1),s("div",la,v(e.formatAmount(e.orderDetail.total_amount)),1)])):(f(),y("div",ca,[s("div",da,v(a.$t("payment.total_price")),1),s("div",ua,v(e.formatAmount(e.getPlanPrice())),1)])),e.orderDetail.discount_amount>0?(f(),y("div",fa,[s("div",ha,v(a.$t("payment.discount_amount")),1),s("div",va,"-"+v(e.formatAmount(e.orderDetail.discount_amount)),1)])):R("",!0),e.orderDetail.balance_amount!==null&&e.orderDetail.balance_amount!==void 0&&e.orderDetail.balance_amount>0?(f(),y("div",ma,[s("div",_a,v(a.$t("payment.use_credit")),1),s("div",ya,"-"+v(e.formatAmount(e.orderDetail.balance_amount)),1)])):R("",!0),e.orderDetail.refund_amount!==null&&e.orderDetail.refund_amount!==void 0&&e.orderDetail.refund_amount>0?(f(),y("div",ga,[s("div",pa,v(a.$t("payment.refund_amount")),1),s("div",Ca,v(e.formatAmount(e.orderDetail.refund_amount)),1)])):R("",!0),e.selectedMethod&&e.handleFeeAmount>0?(f(),y("div",ka,[s("div",wa,v(a.$t("payment.handling_fee")),1),s("div",Ma,v(e.formatAmount(e.handleFeeAmount)),1)])):R("",!0),s("div",ba,[s("div",Ea,v(a.$t("payment.total_with_fee")),1),s("div",Ia,v(e.formatAmount(e.totalWithFee)),1)])]))])]),s("div",Aa,[s("div",Sa,[s("div",Ra,[s("span",null,v(a.$t("payment.order_status")),1)]),e.loading.order?(f(),y("div",Ga,[...l[15]||(l[15]=[s("div",{class:"skeleton-text"},null,-1)])])):(f(),y("div",Na,[s("div",{class:ge(["order-status-notice",e.getStatusClass(e.orderDetail.status)])},[s("div",Da,[e.orderDetail.status===0&&e.orderDetail.total_amount>0?(f(),F(r,{key:0,size:48})):e.orderDetail.status===0&&e.orderDetail.total_amount===0?(f(),F(r,{key:1,size:48})):e.orderDetail.status===1?(f(),F(t,{key:2,size:48,class:"rotating-icon"})):e.orderDetail.status===2?(f(),F(n,{key:3,size:48})):e.orderDetail.status===3?(f(),F(o,{key:4,size:48})):e.orderDetail.status===4?(f(),F(o,{key:5,size:48})):(f(),F(i,{key:6,size:48}))]),s("div",Ta,[e.orderDetail.status===0&&e.orderDetail.total_amount===0?(f(),y("h3",za,v(a.$t("payment.status.activate")),1)):(f(),y("h3",Oa,v(e.getStatusText(e.orderDetail.status)),1)),e.orderDetail.status===0&&e.orderDetail.total_amount>0?(f(),y("p",La,v(a.$t("payment.description")),1)):e.orderDetail.status===1?(f(),y("p",Fa,v(a.$t("payment.payment_processing")),1)):e.orderDetail.status===2?(f(),y("p",Ba,v(a.$t("payment.order_cancelled")),1)):e.orderDetail.status===3?(f(),y("p",Qa,v(a.$t("payment.payment_successful_desc")),1)):e.orderDetail.status===4?(f(),y("p",Ua,v(a.$t("payment.payment_successful_desc")),1)):e.orderDetail.status!==0?(f(),y("p",Ha,v(a.$t("payment.unknown_status_desc")),1)):R("",!0)])],2)]))]),!e.loading.order&&e.orderDetail.total_amount===0&&e.orderDetail.status===0?(f(),y("div",qa,[s("div",Ya,[s("span",null,v(a.$t("payment.free_order")),1)]),s("div",Va,[Q(u,{size:48,class:"notice-icon success"}),s("div",Wa,[s("h3",null,v(a.$t("payment.free_order_title")),1),s("p",null,v(a.$t("payment.free_order_desc")),1)])])])):R("",!0),!e.loading.order&&e.orderDetail.status===0&&e.orderDetail.total_amount>0?(f(),y("div",xa,[s("div",Xa,[s("span",null,v(a.$t("payment.payment_method")),1)]),e.loading.methods?(f(),y("div",nn,[(f(),y(K,null,ee(2,h=>s("div",{class:"skeleton-payment-method",key:"method-"+h})),64))])):(f(),y("div",Ka,[(f(!0),y(K,null,ee(e.paymentMethods,h=>(f(),y("div",{class:ge(["payment-method-item",{active:e.selectedMethod===h.id}]),key:h.id,onClick:A=>e.selectMethod(h.id)},[s("div",Ja,[h.icon?(f(),y("img",{key:1,src:h.icon,alt:h.name},null,8,ja)):(f(),F(d,{key:0}))]),s("div",$a,[s("div",en,v(h.name),1),h.handling_fee_percent||h.handling_fee_fixed?(f(),y("div",tn,v(e.formatFee(h)),1)):R("",!0)]),s("div",an,[e.selectedMethod===h.id?(f(),F(k,{key:0})):(f(),F(E,{key:1}))])],10,Za))),128))]))])):R("",!0),s("div",on,[e.fromOrderList&&(e.paymentSuccessful||e.orderDetail.status!==0)?(f(),y("div",rn,[s("button",{class:"btn-back main-action full-width",onClick:l[0]||(l[0]=(...h)=>e.goBack&&e.goBack(...h))},[Q(I,{size:18}),s("span",null,v(a.$t("payment.return_to_previous")),1)])])):R("",!0),(e.paymentSuccessful||e.orderDetail.status>0)&&!e.fromOrderList?(f(),y("div",sn,[s("button",{class:"btn-pay main-action full-width",onClick:l[1]||(l[1]=(...h)=>e.goToDashboard&&e.goToDashboard(...h))},[Q(b,{size:18}),e.orderDetail.period==="deposit"?(f(),y("span",ln,v(a.$t("payment.continue_to_wallet")),1)):(f(),y("span",cn,v(a.$t("payment.continue_to_dashboard")),1))])])):R("",!0),!e.loading.order&&e.orderDetail.status===0&&!e.paymentSuccessful?(f(),y(K,{key:2},[e.orderDetail.total_amount>0?(f(),y("div",dn,[s("button",{class:"btn-pay main-action full-width",onClick:l[2]||(l[2]=(...h)=>e.processPayment&&e.processPayment(...h)),disabled:e.orderDetail.total_amount>0&&!e.selectedMethod||e.loading.paying||e.loading.checking},[e.loading.paying?(f(),y("div",fn)):(f(),F(d,{key:0,size:18})),s("span",null,v(a.$t("payment.pay_now")),1)],8,un)])):R("",!0),e.orderDetail.total_amount===0?(f(),y("div",hn,[s("button",{class:"btn-back secondary-action",onClick:l[3]||(l[3]=(...h)=>e.cancelCurrentOrder&&e.cancelCurrentOrder(...h)),disabled:e.loading.cancelling},[e.loading.cancelling?(f(),y("div",mn)):(f(),F(n,{key:0,size:18})),s("span",null,v(a.$t("payment.cancel_order")),1)],8,vn),s("button",{class:"btn-pay main-action",onClick:l[4]||(l[4]=(...h)=>e.checkPayment&&e.checkPayment(...h)),disabled:e.loading.checking},[e.loading.checking?(f(),y("div",yn)):(f(),F(d,{key:0,size:18})),s("span",null,v(a.$t("payment.activate")),1)],8,_n)])):R("",!0),e.orderDetail.total_amount>0?(f(),y("div",gn,[s("button",{class:"btn-back secondary-action",onClick:l[5]||(l[5]=(...h)=>e.cancelCurrentOrder&&e.cancelCurrentOrder(...h)),disabled:e.loading.cancelling},[e.loading.cancelling?(f(),y("div",Cn)):(f(),F(n,{key:0,size:18})),s("span",null,v(a.$t("payment.cancel_order")),1)],8,pn),s("button",{class:"btn-check secondary-action",onClick:l[6]||(l[6]=(...h)=>e.checkPaymentStatus&&e.checkPaymentStatus(...h)),disabled:e.orderDetail.total_amount>0&&!e.selectedMethod||e.loading.checking||e.loading.paying},[e.loading.checking?(f(),y("div",wn)):(f(),F(P,{key:0,size:18})),s("span",null,v(a.$t("payment.check_payment")),1)],8,kn)])):R("",!0)],64)):R("",!0)])])])]),Q(le,{name:"fade"},{default:se(()=>[e.showSuccessAnimation?(f(),y("div",Mn,[s("div",bn,[s("div",En,[s("div",In,[Q(o,{size:100,class:"check-icon"})])]),s("h2",null,v(a.$t("payment.payment_successful")),1),s("p",null,v(a.$t("payment.payment_successful_desc")),1)]),e.showConfettiAnimation?(f(),y("div",Pn,[Q(S,{particleCount:150,force:.4,stageWidth:e.window.innerWidth,stageHeight:e.window.innerHeight,colors:["#ffcc00","#ff8800","#ff3333","#26A65B","#42A5F5","#9C27B0"]},null,8,["stageWidth","stageHeight"])])):R("",!0)])):R("",!0)]),_:1}),Q(le,{name:"modal-fade"},{default:se(()=>[e.showCancelConfirm?(f(),y("div",An,[s("div",{class:"cancel-modal-overlay",onClick:l[7]||(l[7]=(...h)=>e.closeModal&&e.closeModal(...h))}),s("div",Sn,[s("div",Rn,[s("div",Nn,[Q(_,{size:28})]),s("div",Dn,[s("h3",null,v(a.$t("payment.confirm_cancel_title")),1),s("p",null,v(a.$t("payment.confirm_cancel_desc")),1)]),s("div",Tn,[s("button",{class:"cancel-btn",onClick:l[8]||(l[8]=(...h)=>e.closeModal&&e.closeModal(...h))},v(a.$t("common.cancel")),1),s("button",{class:"confirm-btn",onClick:l[9]||(l[9]=(...h)=>e.confirmCancel&&e.confirmCancel(...h))},v(a.$t("common.confirm")),1)])])])])):R("",!0)]),_:1}),Q(le,{name:"modal"},{default:se(()=>[e.showPaymentModal?(f(),y("div",zn,[s("div",{class:"modal-backdrop",onClick:l[10]||(l[10]=(...h)=>e.closePaymentModal&&e.closePaymentModal(...h))}),s("div",On,[s("div",Ln,[s("button",{class:"close-button",onClick:l[11]||(l[11]=(...h)=>e.closePaymentModal&&e.closePaymentModal(...h))},"Ã—"),s("div",Fn,[s("div",Bn,[Q(d,{size:32})]),s("h3",null,v(e.selectedMethod?e.getSelectedMethodName():a.$t("payment.payment_method")),1),e.detectBrowser()==="Safari"&&e.PAYMENT_CONFIG.useSafariPaymentModal&&e.paymentLink?(f(),y("p",Qn,v(a.$t("payment.safari_payment_notice")),1)):(f(),y("p",Un,v(a.$t("payment.scan_qrcode")),1)),e.paymentQRCode?(f(),y("div",Hn,[Q(p,{value:e.paymentQRCode,size:e.PAYMENT_CONFIG.qrcodeSize,background:e.PAYMENT_CONFIG.qrcodeBackground,foreground:e.PAYMENT_CONFIG.qrcodeColor,level:"H","render-as":"svg"},null,8,["value","size","background","foreground"])])):R("",!0),e.paymentLink?(f(),y("div",Gn,[s("button",{class:"btn-link",onClick:l[12]||(l[12]=(...h)=>e.openPaymentLink&&e.openPaymentLink(...h))},[Q(M,{size:18}),e.detectBrowser()==="Safari"&&e.PAYMENT_CONFIG.useSafariPaymentModal?(f(),y("span",qn,v(a.$t("payment.safari_payment_button")),1)):(f(),y("span",Yn,v(a.$t("payment.open_in_new_tab")),1))])])):R("",!0)]),s("div",Vn,[s("button",{class:"btn-secondary",onClick:l[13]||(l[13]=(...h)=>e.closePaymentModal&&e.closePaymentModal(...h))},[Q(n,{size:18}),s("span",null,v(a.$t("common.cancel")),1)]),s("button",{class:"btn-primary",onClick:l[14]||(l[14]=(...h)=>e.checkPayment&&e.checkPayment(...h))},[Q(P,{size:18}),s("span",null,v(a.$t("payment.check_payment")),1)])])])])])):R("",!0)]),_:1})])}const ro=ze(bt,[["render",Wn],["__scopeId","data-v-bed9a272"]]);export{ro as default};
