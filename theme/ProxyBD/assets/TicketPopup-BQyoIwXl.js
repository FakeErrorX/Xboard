import{Z as w,aB as l,_ as g,z as C,o as c,B as d,c as r,a as m,e as f,d as i,r as y,a0 as k,l as _,t as v,$ as h,v as I,f as T,w as b,s as M}from"./appInit-CGHXFw0-.js";import{I as S}from"./IconX-CVTrmr_B.js";/**
 * @license @tabler/icons-vue v3.35.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var z=w("outline","message-circle","MessageCircle",[["path",{d:"M3 20l1.3 -3.9c-2.324 -3.437 -1.426 -7.872 2.1 -10.374c3.526 -2.501 8.59 -2.296 11.845 .48c3.255 2.777 3.695 7.266 1.029 10.501c-2.666 3.235 -7.615 4.215 -11.574 2.293l-4.7 1",key:"svg-0"}]]);function q(){return l({url:"/user/ticket/fetch",method:"get"})}function E(t){return l({url:"/user/ticket/save",method:"post",data:t})}function F(t){return l({url:`/user/ticket/fetch?id=${t}`,method:"get"})}function U(t,o){return l({url:"/user/ticket/reply",method:"post",data:{id:t,message:o}})}function Z(t){return l({url:"/user/ticket/close",method:"post",data:{id:t}})}const B={name:"TicketPopup",components:{IconX:S},props:{showPopup:{type:Boolean,default:!1},title:{type:String,default:""},content:{type:String,default:""},cooldownHours:{type:Number,default:24},closeWaitSeconds:{type:Number,default:0}},emits:["close"],setup(t,{emit:o}){const n=T(!1),e=T(0);let s=null;const p=()=>{s&&clearInterval(s),t.closeWaitSeconds>0?(e.value=t.closeWaitSeconds,s=setInterval(()=>{e.value>0?e.value-=1:clearInterval(s)},1e3)):e.value=0},u=()=>{if(!(e.value>0)){if(n.value=!1,t.cooldownHours>0){const a=Date.now();localStorage.setItem("ticket_popup_close_time",a.toString())}o("close")}};return b(()=>t.showPopup,a=>{a?setTimeout(()=>{n.value=!0,p()},1e3):(n.value=!1,s&&clearInterval(s))},{immediate:!0}),M(()=>{s&&clearInterval(s)}),{show:n,attemptClose:u,waitTimeRemaining:e}}},H={key:0,class:"ticket-popup-container"},N={class:"ticket-popup-header"},L=["innerHTML"],V={class:"ticket-popup-content"},P=["innerHTML"],R={class:"ticket-popup-footer"},x=["disabled"];function D(t,o,n,e,s,p){const u=y("IconX");return c(),C(h,{name:"fade"},{default:d(()=>[e.show?(c(),r("div",{key:0,class:"ticket-popup-overlay",onClick:o[2]||(o[2]=I((...a)=>e.attemptClose&&e.attemptClose(...a),["self"]))},[f(h,{name:"popup-slide"},{default:d(()=>[e.show?(c(),r("div",H,[i("div",N,[i("h2",{class:"popup-title",innerHTML:n.title},null,8,L),i("button",{class:"popup-close-btn",onClick:o[0]||(o[0]=(...a)=>e.attemptClose&&e.attemptClose(...a))},[f(u,{size:20})])]),i("div",V,[i("div",{innerHTML:n.content},null,8,P)]),i("div",R,[i("button",{class:"popup-action-btn",onClick:o[1]||(o[1]=(...a)=>e.attemptClose&&e.attemptClose(...a)),disabled:e.waitTimeRemaining>0},[e.waitTimeRemaining>0?(c(),r(k,{key:0},[_(v(t.$t("tickets.popup.wait_close_btn",{seconds:e.waitTimeRemaining})),1)],64)):(c(),r(k,{key:1},[_(v(t.$t("tickets.popup.close_btn")),1)],64))],8,x)])])):m("",!0)]),_:1})])):m("",!0)]),_:1})}const j=g(B,[["render",D],["__scopeId","data-v-cb51f511"]]);export{z as I,j as T,Z as a,E as c,q as f,F as g,U as r};
