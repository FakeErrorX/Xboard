import{_ as T,c as n,o as s,a as S,n as _,b,d as E,e as k,r as N,f as d,u as R,g,T as C,D as W,w as B,h as F,i as M,S as v,j as O}from"./appInit-CGHXFw0-.js";import x from"./LandingPage-DxJB9B74.js";import"./index-sC8Xq0xY.js";import"./IconChevronDown-Dm4MbJmO.js";const D={name:"CustomLandingPage",components:{LandingPage:x},setup(){const h=O(),o=d(null),r=d(null),a=d(!1),{theme:t,toggleTheme:p}=R(),l=g(()=>({backgroundColor:C[t.value].backgroundColor})),i=g(()=>{const e=C[t.value],L=e.primaryColor||W.primaryColor,w=e.primaryColorRgb;return{"--loader-primary-color":L,"--loader-primary-rgb":w,"--loader-primary-light":L}}),f=e=>{e.data&&e.data.type==="navigation"?h.push("/"+e.data.route):e.data&&e.data.type==="themeChanged"?t.value!==e.data.theme&&p():e.data&&e.data.type==="getTheme"&&c()},c=()=>{o.value&&o.value.contentWindow&&o.value.contentWindow.postMessage({type:"setTheme",theme:t.value},"*")};B(t,()=>{c()});const I=()=>{setTimeout(()=>{u()},500)},P=()=>{u()},m="pb_preloader_shown",y=d(sessionStorage.getItem(m)!=="1"),u=()=>{a.value=!0,sessionStorage.setItem(m,"1"),y.value=!1};return F(async()=>{sessionStorage.getItem(m)==="1"&&(a.value=!0,r.value&&(r.value.style.display="none")),window.addEventListener("message",f),o.value&&(o.value.onload=()=>{setTimeout(()=>{c()},500)}),setTimeout(()=>{a.value||u()},5e3)}),M(()=>{window.removeEventListener("message",f)}),{customLandingPath:g(()=>{if(!v.customLandingPage)return"";let e=v.customLandingPage;return!e.startsWith("/")&&!e.startsWith("http://")&&!e.startsWith("https://")&&(e="/"+e),e}),landingIframe:o,preloader:r,isLoaded:a,handleIframeLoaded:I,handleContentLoaded:P,preloaderStyle:l,loaderStyle:i,shouldShowPreloader:y}}},G={class:"custom-landing-container"},V=["src"],z={key:2};function A(h,o,r,a,t,p){const l=N("LandingPage");return s(),n("div",G,[a.shouldShowPreloader?(s(),n("div",{key:0,class:b(["preloader",{"fade-out":a.isLoaded}]),ref:"preloader",style:_(a.preloaderStyle)},[E("div",{class:"loader",style:_(a.loaderStyle)},null,4)],6)):S("",!0),a.customLandingPath?(s(),n("iframe",{key:1,src:a.customLandingPath,class:"custom-landing-iframe",ref:"landingIframe",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:"",onLoad:o[0]||(o[0]=(...i)=>a.handleIframeLoaded&&a.handleIframeLoaded(...i))},null,40,V)):(s(),n("div",z,[k(l,{onLoaded:a.handleContentLoaded},null,8,["onLoaded"])]))])}const q=T(D,[["render",A],["__scopeId","data-v-01efd6b2"]]);export{q as default};
